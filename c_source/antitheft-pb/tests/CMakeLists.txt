SET(PATH_TO_CMAKE_MODULES "/cmake/Modules/")
SET(TEST_MACROS "TestsMacros")
SET(ENABLE_COLOR_MSG ON)

# Search Modules directory and TestMacros in CMAKE_CURRENT_LIST_DIR and parents directory
SET (PARENT_DIR ${CMAKE_CURRENT_LIST_DIR})
WHILE ((NOT EXISTS ${PARENT_DIR}${PATH_TO_CMAKE_MODULES}) AND (NOT ${PARENT_DIR} STREQUAL "/"))
    GET_FILENAME_COMPONENT(PARENT_DIR ${PARENT_DIR} DIRECTORY)
ENDWHILE()
IF (EXISTS ${PARENT_DIR}${PATH_TO_CMAKE_MODULES}${TEST_MACROS}.cmake)        
    INCLUDE(${PARENT_DIR}${PATH_TO_CMAKE_MODULES}${TEST_MACROS}.cmake)
    SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PARENT_DIR}${PATH_TO_CMAKE_MODULES}")
ELSE()
    MESSAGE(FATAL_ERROR "Not find " ${TEST_MACROS}.cmake)
ENDIF()    

BUILD_TEST()




